(()=>{"use strict";(()=>{function t(t,e){return t.getContext("2d",e)}function e(t,e,i){t.clearRect(0,0,e,i)}const{log:i,error:s,table:o,time:a,timeEnd:n,timeStamp:r,timeLog:h,assert:c,clear:l,count:u,countReset:x,group:d,groupCollapsed:p,groupEnd:g,trace:f,profile:v,profileEnd:m,warn:w,debug:y,info:k,dir:D,dirxml:C}=console;class b{constructor(t,e,i,s,o,a,n,r=0){this.context=t,this.width=e,this.height=i,this.originX=s,this.originY=o,this.color=a,this.x=this.originX,this.y=this.originY,this.gap=r,this.size=n-this.gap,this.vectorX=0,this.vectorY=0,this.mouseParticleDistanceX=0,this.mouseParticleDistanceY=0,this.mouseTotalDistance=0,this.force=0,this.angle=0,this.friction=.6*Math.random()+.15,this.ease=.2*Math.random()+.05}update(t,e,i=2e4){const{x:s,y:o}=this.context.canvas.getBoundingClientRect();this.mouseParticleDistanceX=t-this.x-s,this.mouseParticleDistanceY=e-this.y-o,this.mouseTotalDistance=Math.pow(this.mouseParticleDistanceX,2)+Math.pow(this.mouseParticleDistanceY,2);this.mouseTotalDistance<i&&(this.angle=Math.atan2(this.mouseParticleDistanceY,this.mouseParticleDistanceX),this.force=-1*i/this.mouseTotalDistance,this.vectorX=Math.cos(this.angle)*this.force,this.vectorY=Math.sin(this.angle)*this.force),this.vectorX*=this.friction,this.vectorY*=this.friction,this.x+=this.vectorX+(this.originX-this.x)*this.ease,this.y+=this.vectorY+(this.originY-this.y)*this.ease}draw(){this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.size,this.size)}}class S{constructor(e,i,s,o,a,n="transparent",r,h){this.canvas=e,this.context=t(e),this.particlesArray=[],this.text=i,this.textColor=s,this.fontSize=o,this.fontFamily=a,this.strokeColor=n,this.strokeWidth=r,this.pixelResolution=h,this.createText(),this.convertToPixels(this.pixelResolution)}createText(){this.context.fillStyle=this.textColor,this.context.strokeStyle=this.strokeColor,this.context.font=`${this.fontSize}px ${this.fontFamily}`,this.textMetrics=this.context.measureText(this.text),this.textX=this.canvas.width/2-this.textMetrics.width/2,this.textY=this.canvas.height/2-this.fontSize/2,this.context.fillText(this.text,this.textX,this.textY),this.context.strokeText(this.text,this.textX,this.textY),i(this.context),this.pixelsData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}animatePixels(t,e,i=2e4){for(const s of this.particlesArray)s.update(t,e,i),s.draw()}convertToPixels(t=1){e(this.context,this.canvas.width,this.canvas.height),i(this.pixelsData);for(let e=0;e<this.pixelsData.height;e+=t)for(let i=0;i<this.pixelsData.width;i+=t){const s=4*i+4*e*this.pixelsData.width;if(this.pixelsData.data[s+3]<10)continue;const o=this.pixelsData.data[s+0],a=this.pixelsData.data[s+1],n=this.pixelsData.data[s+2],r=`rgb(${o}, ${a}, ${n})`,h=new b(this.context,this.canvas.width,this.canvas.height,i,e,r,t,0);this.particlesArray.push(h)}}reset(){this.particlesArray=[]}}function T(t,e){var i;if(!e)return document.querySelector(t);return(null===(i=null==e?void 0:e.tagName)||void 0===i?void 0:i.includes("-"))?e.shadowRoot.querySelector(t):e.querySelector(t)}function X(t,e,i=document.body){const s=e.toString();return i.style.setProperty(t,s)}const Y=[{key:"text",value:""},{key:"family",value:"Consolas"},{key:"fill",value:"white"},{key:"size",value:32},{key:"strokeColor",value:"transparent"},{key:"strokeWidth",value:1},{key:"pixelResolution",value:2}];i("Hello world!");const P=T("canvas"),A=t(P,{willReadFrequently:!0}),M=T(".index__container"),R=T(".index__input");R.addEventListener("input",(function(t){cancelAnimationFrame($),e(A,P.width,P.height),H.reset(),H=H=new S(P,t.target.value,"white",32,"Consolas"),i(t.target.value),U()}));const E=new Map,L=new Map,q=(z=".index__input--color",_?_.tagName.includes("-")?Array.from(_.shadowRoot.querySelectorAll(z)):Array.from(_.querySelectorAll(z)):Array.from(document.querySelectorAll(z)));var z,_;function F(t){const e=t.currentTarget,s=e.parentElement;const o=(a=s.innerText,n=":",a.split(n))[0];var a,n;i({labelType:o});const r=function(t,e){switch(e.toLowerCase().trim()){case"lowercase":return t.toLowerCase();case"uppercase":return t.toUpperCase();case"titlecase":{let e=t.split(" ");for(let t=0;t<e.length;t++){const i=e[t].substring(0,1).toUpperCase(),s=e[t].slice(1).toLowerCase();e[t]=i+s}return e=e.concat(),e.toString()}case"titlecase2":return t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase();default:throw new Error("Formatting text error: unknown option passed in argument")}}(e.value,"uppercase");switch(T(".index__label-span",s).textContent=r,X("--bg-input-color",r,e),o){case"Canvas background":X("--bg-input-color",r,e),X("--bg-canvas",r,P);break;case"Fill":L.set("fill",r),X("--bg-input-color",r,e);break;case"Stroke color":L.set("strokeColor",r),X("--bg-input-color",r,e);break;default:X("--bg-input-color",r,e)}i(L)}!function(){for(const t of q)t.addEventListener("input",F)}(),function(){for(const t of Y){const{key:e,value:i}=t;L.set(e,i)}}(),i(L);let $=0;function W(){P.width=M.clientWidth,P.height=M.clientHeight}P.width=M.clientWidth,P.height=M.clientHeight,W(),window.addEventListener("resize",W),P.addEventListener("mousemove",(function(t){E.set("x",t.x),E.set("y",t.y)}));let H=new S(P,R.value,"white",32,"Consolas");function U(){e(A,P.width,P.height),H.animatePixels(E.get("x"),E.get("y"),E.get("radius")),$=requestAnimationFrame(U)}U()})()})();